CREATE TABLE [Purchasing].[SupplierTransactions](	  [SupplierTransactionID] INT NOT NULL DEFAULT(NEXT VALUE FOR [Sequences].[TransactionID])	, [SupplierID] INT NOT NULL	, [TransactionTypeID] INT NOT NULL	, [PurchaseOrderID] INT NULL	, [PaymentMethodID] INT NULL	, [SupplierInvoiceNumber] NVARCHAR(20) COLLATE Latin1_General_CI_AS NULL	, [TransactionDate] DATE NOT NULL	, [AmountExcludingTax] DECIMAL(18,2) NOT NULL	, [TaxAmount] DECIMAL(18,2) NOT NULL	, [TransactionAmount] DECIMAL(18,2) NOT NULL	, [OutstandingBalance] DECIMAL(18,2) NOT NULL	, [FinalizationDate] DATE NULL	, [IsFinalized] AS (case when [FinalizationDate] IS NULL then CONVERT([bit],(0)) else CONVERT([bit],(1)) end)	, [LastEditedBy] INT NOT NULL	, [LastEditedWhen] DATETIME2(7) NOT NULL DEFAULT(sysdatetime())	, CONSTRAINT [PK_Purchasing_SupplierTransactions] PRIMARY KEY ([SupplierTransactionID] ASC))GOALTER TABLE [Purchasing].[SupplierTransactions] WITH CHECK ADD CONSTRAINT [FK_Purchasing_SupplierTransactions_TransactionTypeID_Application_TransactionTypes] FOREIGN KEY([TransactionTypeID]) REFERENCES [Application].[TransactionTypes] ([TransactionTypeID])GOALTER TABLE [Purchasing].[SupplierTransactions] CHECK CONSTRAINT [FK_Purchasing_SupplierTransactions_TransactionTypeID_Application_TransactionTypes]GOALTER TABLE [Purchasing].[SupplierTransactions] WITH CHECK ADD CONSTRAINT [FK_Purchasing_SupplierTransactions_SupplierID_Purchasing_Suppliers] FOREIGN KEY([SupplierID]) REFERENCES [Purchasing].[Suppliers] ([SupplierID])GOALTER TABLE [Purchasing].[SupplierTransactions] CHECK CONSTRAINT [FK_Purchasing_SupplierTransactions_SupplierID_Purchasing_Suppliers]GOALTER TABLE [Purchasing].[SupplierTransactions] WITH CHECK ADD CONSTRAINT [FK_Purchasing_SupplierTransactions_PurchaseOrderID_Purchasing_PurchaseOrders] FOREIGN KEY([PurchaseOrderID]) REFERENCES [Purchasing].[PurchaseOrders] ([PurchaseOrderID])GOALTER TABLE [Purchasing].[SupplierTransactions] CHECK CONSTRAINT [FK_Purchasing_SupplierTransactions_PurchaseOrderID_Purchasing_PurchaseOrders]GOALTER TABLE [Purchasing].[SupplierTransactions] WITH CHECK ADD CONSTRAINT [FK_Purchasing_SupplierTransactions_PaymentMethodID_Application_PaymentMethods] FOREIGN KEY([PaymentMethodID]) REFERENCES [Application].[PaymentMethods] ([PaymentMethodID])GOALTER TABLE [Purchasing].[SupplierTransactions] CHECK CONSTRAINT [FK_Purchasing_SupplierTransactions_PaymentMethodID_Application_PaymentMethods]GOALTER TABLE [Purchasing].[SupplierTransactions] WITH CHECK ADD CONSTRAINT [FK_Purchasing_SupplierTransactions_Application_People] FOREIGN KEY([LastEditedBy]) REFERENCES [Application].[People] ([PersonID])GOALTER TABLE [Purchasing].[SupplierTransactions] CHECK CONSTRAINT [FK_Purchasing_SupplierTransactions_Application_People]GOCREATE NONCLUSTERED INDEX [FK_Purchasing_SupplierTransactions_PaymentMethodID] ON [Purchasing].[SupplierTransactions] ([PaymentMethodID] ASC, [TransactionDate] ASC)GOCREATE NONCLUSTERED INDEX [FK_Purchasing_SupplierTransactions_PurchaseOrderID] ON [Purchasing].[SupplierTransactions] ([PurchaseOrderID] ASC, [TransactionDate] ASC)GOCREATE NONCLUSTERED INDEX [FK_Purchasing_SupplierTransactions_SupplierID] ON [Purchasing].[SupplierTransactions] ([SupplierID] ASC, [TransactionDate] ASC)GOCREATE NONCLUSTERED INDEX [FK_Purchasing_SupplierTransactions_TransactionTypeID] ON [Purchasing].[SupplierTransactions] ([TransactionTypeID] ASC, [TransactionDate] ASC)GOCREATE NONCLUSTERED INDEX [IX_Purchasing_SupplierTransactions_IsFinalized] ON [Purchasing].[SupplierTransactions] ([IsFinalized] ASC, [TransactionDate] ASC)GO