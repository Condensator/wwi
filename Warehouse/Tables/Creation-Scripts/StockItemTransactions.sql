CREATE TABLE [Warehouse].[StockItemTransactions](	  [StockItemTransactionID] INT NOT NULL DEFAULT(NEXT VALUE FOR [Sequences].[TransactionID])	, [StockItemID] INT NOT NULL	, [TransactionTypeID] INT NOT NULL	, [CustomerID] INT NULL	, [InvoiceID] INT NULL	, [SupplierID] INT NULL	, [PurchaseOrderID] INT NULL	, [TransactionOccurredWhen] DATETIME2(7) NOT NULL	, [Quantity] DECIMAL(18,3) NOT NULL	, [LastEditedBy] INT NOT NULL	, [LastEditedWhen] DATETIME2(7) NOT NULL DEFAULT(sysdatetime())	, CONSTRAINT [PK_Warehouse_StockItemTransactions] PRIMARY KEY ([StockItemTransactionID] ASC))GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_TransactionTypeID_Application_TransactionTypes] FOREIGN KEY([TransactionTypeID]) REFERENCES [Application].[TransactionTypes] ([TransactionTypeID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_TransactionTypeID_Application_TransactionTypes]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_SupplierID_Purchasing_Suppliers] FOREIGN KEY([SupplierID]) REFERENCES [Purchasing].[Suppliers] ([SupplierID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_SupplierID_Purchasing_Suppliers]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_StockItemID_Warehouse_StockItems] FOREIGN KEY([StockItemID]) REFERENCES [Warehouse].[StockItems] ([StockItemID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_StockItemID_Warehouse_StockItems]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_PurchaseOrderID_Purchasing_PurchaseOrders] FOREIGN KEY([PurchaseOrderID]) REFERENCES [Purchasing].[PurchaseOrders] ([PurchaseOrderID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_PurchaseOrderID_Purchasing_PurchaseOrders]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_InvoiceID_Sales_Invoices] FOREIGN KEY([InvoiceID]) REFERENCES [Sales].[Invoices] ([InvoiceID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_InvoiceID_Sales_Invoices]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_CustomerID_Sales_Customers] FOREIGN KEY([CustomerID]) REFERENCES [Sales].[Customers] ([CustomerID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_CustomerID_Sales_Customers]GOALTER TABLE [Warehouse].[StockItemTransactions] WITH CHECK ADD CONSTRAINT [FK_Warehouse_StockItemTransactions_Application_People] FOREIGN KEY([LastEditedBy]) REFERENCES [Application].[People] ([PersonID])GOALTER TABLE [Warehouse].[StockItemTransactions] CHECK CONSTRAINT [FK_Warehouse_StockItemTransactions_Application_People]GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_StockItemID] ON [Warehouse].[StockItemTransactions] ([StockItemID] ASC)GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_TransactionTypeID] ON [Warehouse].[StockItemTransactions] ([TransactionTypeID] ASC)GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_CustomerID] ON [Warehouse].[StockItemTransactions] ([CustomerID] ASC)GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_InvoiceID] ON [Warehouse].[StockItemTransactions] ([InvoiceID] ASC)GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_SupplierID] ON [Warehouse].[StockItemTransactions] ([SupplierID] ASC)GOCREATE NONCLUSTERED INDEX [FK_Warehouse_StockItemTransactions_PurchaseOrderID] ON [Warehouse].[StockItemTransactions] ([PurchaseOrderID] ASC)GO